name: ðŸŒ™ Mystic Daily Commit

on:
  schedule:
    - cron: '0 12 * * *'   # æ¯å¤© UTC 12:00ï¼ŒåŒ—äº¬æ—¶é—´ 20:00
  workflow_dispatch:

jobs:
  commit:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout the repo
        uses: actions/checkout@v4

      - name: Generate mystic quote and fortune and append to README
        run: |
          quotes=(
            "ðŸŒ’ æœˆå½±æºã‚Œã€è¨€è‘‰ã¯é¢¨ã«æ¶ˆã‚†ã€‚"
            "ðŸŒ“ é™å¤œã«ã€æ˜Ÿã®å£°ãŒèƒ¸ã‚’æ‰“ã¤ã€‚"
            "ðŸŒ• é›²ã‚’å‰²ã‚Šã€ç™½ãæœˆã€ãŸã ç‹¬ã‚Šã€‚"
            "ðŸŒ˜ é³¥ã‚‚çœ ã‚‹ã€å¤œã®åº•ã«å¤¢ã²ã¨ã¤ã€‚"
            "ðŸŒ‘ é—‡ã‚’æŠ±ãã€å…‰ã¯ãªãŠç”Ÿã¾ã‚Œãã‚‹ã€‚"
            "ðŸŒ™ é¢¨èŠ±èˆžã„ã€éŽåŽ»ã¨æœªæ¥ã‚’ç¹‹ãã€‚"
            "ðŸŒ— å¤¢ã®è·¡ã€æœˆã ã‘ãŒã™ã¹ã¦ã‚’è¦‹ã¦ã„ãŸã€‚"
            "ðŸŒ– æ³¡æ²«ã®ã”ã¨ãã€æƒ³ã„ã¯æ˜‡è¯ã™ã€‚"
            "ðŸŒ” ç™½éœ²è½ã¡ã€è¨˜æ†¶ã®èˆŸã¯å²¸ã‚’é›¢ã‚‹ã€‚"
            "ðŸŒ‘ è¦‹ãˆã¬ã‚‚ã®ã“ãã€å¿ƒã‚’ç…§ã‚‰ã™ã€‚"
          )

          fortunes=(
            "ðŸŒŸ ä»Šæ—¥ã®é‹å‹¢ï¼šå¤§å‰ â€” ä¸‡äº‹é †èª¿ã€å¿ƒé™å¦‚æ°´ã€‚"
            "ðŸŒž ä»Šæ—¥ã®é‹å‹¢ï¼šä¸­å‰ â€” æœ‰æ”¶èŽ·ï¼Œä½†éœ€è°¨æ…Žè¡Œäº‹ã€‚"
            "ðŸŒ¤ï¸ ä»Šæ—¥ã®é‹å‹¢ï¼šå°å‰ â€” ç»†é›¨æ¶¦ç‰©ï¼Œè“„åŠ¿å¾…å‘ã€‚"
            "ðŸŒ«ï¸ ä»Šæ—¥ã®é‹å‹¢ï¼šæœ«å‰ â€” è¿è½¬å¾®å¦™ï¼Œå‹¿æ€¥å‹¿èºã€‚"
            "ðŸŒ§ï¸ ä»Šæ—¥ã®é‹å‹¢ï¼šå‡¶ â€” å‡¡äº‹ä¸å¼ºæ±‚ï¼Œé™è§‚å…¶å˜ã€‚"
          )

          QUOTE=${quotes[$RANDOM % ${#quotes[@]}]}
          FORTUNE=${fortunes[$RANDOM % ${#fortunes[@]}]}
          DATE=$(date '+%Y-%m-%d')

          echo "" >> README.md
          echo "$QUOTE" >> README.md
          echo "$FORTUNE" >> README.md
          echo "ðŸ—“ï¸ $DATE" >> README.md
          echo "" >> README.md

      - name: Commit and push changes
        env:
          TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          git config --global user.name "Qimin-Shen"
          git config --global user.email "qimshen@bu.edu"
          git remote set-url origin https://x-access-token:${TOKEN}@github.com/${{ github.repository }}
          git add README.md
          git commit -m "ðŸŒŒ Mystic update on $(date '+%Y-%m-%d')" || echo "No changes to commit"
          git push origin main
